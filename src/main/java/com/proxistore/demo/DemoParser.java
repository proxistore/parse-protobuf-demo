package com.proxistore.demo;

import com.google.doubleclick.AdxExt;
import com.google.openrtb.OpenRtb;

import java.nio.charset.StandardCharsets;
import java.util.Base64;

public class DemoParser {
	private static String bufferOpenRtb =
			"ChZyZEVjdVdteEZSYkdiWDJsbFo2OTNREs4CCgExEjEIrAIQ2AQgAzICBgdYrAJg2ARorAJw+gF6BgisAhDYBLI/DhIMCKwCEKwCGPoBINgEIgZHT09HTEU6CjExODcyOTg5OTZBexSuR+F61D9KA0VVUlo3CAESMwoHMTcyMDcyNBEAAAAAAAAMQBoDRVVSMAOSPxcIARgBKgMKAQEyDJ78j5DkA+2Jz+HIA2ABcJAcigEnChJjbGlja190aHJvdWdoX3JhdGURAAAAIPaDTD8aCEVYQ0hBTkdFigEgCgt2aWV3YWJpbGl0eREK16NwPQq3PxoIRVhDSEFOR0WKP2gInvyPkOQDCO2Jz+HIAxHNvVJU9fNsrRGUgHQjwtfHIRFWOltLXPzgMBoBAEADSiYSJDVhYzRhMjhlLTg1OGUtNGJhYi05MmRhLTQ5MDU2N2YxMzJiY2ggaCF6BggCEAEYAZABAJAEABqqATp1aHR0cHM6Ly93d3cubGVwb2ludC5mci9wb2xpdGlxdWUvY2EtcGV1dC10YW5ndWVyLWxlLXBzLWEtbC1oZXVyZS1kdS1jaG9peC1mYWNlLWEtbGVjb3JudS1paS0xMy0xMC0yMDI1LTI2MDA4MzFfMjAucGhwWh0KFHB1Yi04MTQwMzQ2ODI2MDk4NDQz0j4ECgJGUmIHaACaAQJmcpI/CAgAEAIiADACKugCEm9Nb3ppbGxhLzUuMCAoV2luZG93cyBOVCAxMC4wOyBXaW42NDsgeDY0KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvMTQwLjAuMC4wIFNhZmFyaS81MzcuMzYaDDIxNy4xOTUuMjguMCJJCQrXo3A9akhAEexRuB6F6wFAGgNGUkEiBEZSLUo6FEJvdWxvZ25lLUJpbGxhbmNvdXJ0QgU5MjEwMEgCUHhY9AriPgUI7eGoBHIHV2luZG93c5ABAuEBAAAAAAAA8D/6AYEBCh0KCENocm9taXVtEgMxNDASATASBDczMzkSAzIwOAoaCgtOb3Q9QT9CcmFuZBICMjQSATASATASATAKIgoNR29vZ2xlIENocm9tZRIDMTQwEgEwEgQ3MzM5EgMyMDgSEwoHV2luZG93cxICMTUSATASATAYACIDeDg2KgI2NDgC0kIAMpoMUuEFQ1FaVk9nQVFaVk9nQUFHQUJDRU5CLUZzQVBfZ0FFUGdBQXFJS2JNQmJHSk1TU0ZnY1RwMVlPc0FhWWdld1ZBQ3FzQWdCZ0tCQVFBQmlCSUN0SVFVa0dBQUlBaEFoaUFBQUFJQUNFQkFBQUJsQUFCQUFBQUFJQUFBQUNBTUNBQUFBQkFBSUNBQUFBQUJRZ0FBQ0VBSkFRQUFBQUFReEVCRUFBRUFnUUlFNkpwVXdBeEFBQUFBQ0FBQUFBQUFBQUNBQUFBSUFBQUFBQUFBQVFBQUFBZ0FBQUFBQUFJQUFBQUFBQkFBRUFBQUFBRUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFFRElZQ1FBQ2dBSGdBa0FCVUFFY0FSd0E3Z0I5Z0VBQUlRQVJ3QV80Q1BRRXhBTEVBV29BeFlCa0lCSVNBNUFCUUFGUUFPQUFnZ0JrQUdvQVBBQW1BQlZBRGVBSDRBUWdBamdCV2dEREFHVUFPY0Fkd0Etd0ItZ0VBQU5FQWJRQlI0QzJBRjVnTU5nWkdCa2dEVndISmpvRU1BRkFBVkFBNEFDQ0FHUUFhZ0E4QUNZQUZXQUxnQXVnQmlBRGVBSDRBVVlBclFCaGdES0FIT0FPNEFmWUFfUUNMQUVkQU5vQW1RQlI0QzJBRjVnTDZBWWFBeDZCa1lHU0FOWEFjbUJIWWNBQkFDZ1FnRmdBVUFCcUFGVUFMZ0FZZ0EzZ0ItQUhPQU80QTJnREl5VUE4QUNnQUhBQWVBQk1BQ3FBRndBTVFBamdCUmdDdEFVZUFwb0JiQUM4NEdSZ1pJVWdOUUFVQUJVQURnQUlJQVpBQm9BRHdBSmdBVlFBeEFCLUFGR0FLMEFaUUE1d0ItZ0VXQUk2QWJRQlRRQzJBRjVnTDZBWWJBeU1ESkFISmdRNUFqc1ZBQWdBS0tBQXdBb0FCYkFJNFdnQmdBMUFIY0Fwb0FBQS5mX3dBQUFBQUFBQUH6PrIGChYSBe4DhhZZGg0xfjg5LjQ5NC4yODIyEuEFQ1FaVk9nQVFaVk9nQUFHQUJDRU5CLUZzQVBfZ0FFUGdBQXFJS2JNQmJHSk1TU0ZnY1RwMVlPc0FhWWdld1ZBQ3FzQWdCZ0tCQVFBQmlCSUN0SVFVa0dBQUlBaEFoaUFBQUFJQUNFQkFBQUJsQUFCQUFBQUFJQUFBQUNBTUNBQUFBQkFBSUNBQUFBQUJRZ0FBQ0VBSkFRQUFBQUFReEVCRUFBRUFnUUlFNkpwVXdBeEFBQUFBQ0FBQUFBQUFBQUNBQUFBSUFBQUFBQUFBQVFBQUFBZ0FBQUFBQUFJQUFBQUFBQkFBRUFBQUFBRUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFFRElZQ1FBQ2dBSGdBa0FCVUFFY0FSd0E3Z0I5Z0VBQUlRQVJ3QV80Q1BRRXhBTEVBV29BeFlCa0lCSVNBNUFCUUFGUUFPQUFnZ0JrQUdvQVBBQW1BQlZBRGVBSDRBUWdBamdCV2dEREFHVUFPY0Fkd0Etd0ItZ0VBQU5FQWJRQlI0QzJBRjVnTU5nWkdCa2dEVndISmpvRU1BRkFBVkFBNEFDQ0FHUUFhZ0E4QUNZQUZXQUxnQXVnQmlBRGVBSDRBVVlBclFCaGdES0FIT0FPNEFmWUFfUUNMQUVkQU5vQW1RQlI0QzJBRjVnTDZBWWFBeDZCa1lHU0FOWEFjbUJIWWNBQkFDZ1FnRmdBVUFCcUFGVUFMZ0FZZ0EzZ0ItQUhPQU80QTJnREl5VUE4QUNnQUhBQWVBQk1BQ3FBRndBTVFBamdCUmdDdEFVZUFwb0JiQUM4NEdSZ1pJVWdOUUFVQUJVQURnQUlJQVpBQm9BRHdBSmdBVlFBeEFCLUFGR0FLMEFaUUE1d0ItZ0VXQUk2QWJRQlRRQzJBRjVnTDZBWWJBeU1ESkFISmdRNUFqc1ZBQWdBS0tBQXdBb0FCYkFJNFdnQmdBMUFIY0Fwb0FBQS5mX3dBQUFBQUFBQUEqNAoKcHViY2lkLm9yZxImCiQ1YWM0YTI4ZS04NThlLTRiYWItOTJkYS00OTA1NjdmMTMyYmM4AUDeAloDRVVSWgNVU0RiB0lBQjExLTRiB0lBQjEzLTJiB0lBQjE0LTFiB0lBQjE1LTFiCElBQjE5LTMwYgVJQUIyM2IHSUFCMjMtMWIISUFCMjMtMTBiB0lBQjIzLTJiB0lBQjIzLTNiB0lBQjIzLTRiB0lBQjIzLTViB0lBQjIzLTZiB0lBQjIzLTdiB0lBQjIzLThiB0lBQjIzLTliB0lBQjctMzliB0lBQjctNDRyBxIAyj4CCAGaATIiLQgBEiQKCmdvb2dsZS5jb20SFHB1Yi04MTQwMzQ2ODI2MDk4NDQzMAEaAzEuMJpCAKgBAdI/VRJKQUQ4RmRtNDFiNFVrTVJRUDhQR3VidlhXcnJiQzZGbzhoS0YzcDNtUHFreW9BNVFvYnczT3hkSC0tblBhQ0Q0U3l4OVZ1ZXEzTncgASoFMgEDOAA=";

	public static void main(String[] args) throws Exception {
		OpenRtb.BidRequest bidRequest = OpenRtb.BidRequest.parseFrom(Base64.getDecoder().decode(bufferOpenRtb.getBytes(StandardCharsets.UTF_8)));

		System.out.println(bidRequest);
		System.out.println("==================================================");
		System.out.println("EIDs count: " + bidRequest.getUser().getExtension(AdxExt.user).getEidsCount());
	}
}
