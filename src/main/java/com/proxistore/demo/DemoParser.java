package com.proxistore.demo;

import com.google.doubleclick.AdxExt;
import com.google.openrtb.OpenRtb;

import java.nio.charset.StandardCharsets;
import java.util.Base64;

public class DemoParser {

	public static void main(String[] args) throws Exception {
		String userExtEidSample =
				"ChZyZEVjdVdteEZSYkdiWDJsbFo2OTNREs4CCgExEjEIrAIQ2AQgAzICBgdYrAJg2ARorAJw+gF6BgisAhDYBLI/DhIMCKwCEKwCGPoBINgEIgZHT09HTEU6CjExODcyOTg5OTZBexSuR+F61D9KA0VVUlo3CAESMwoHMTcyMDcyNBEAAAAAAAAMQBoDRVVSMAOSPxcIARgBKgMKAQEyDJ78j5DkA+2Jz+HIA2ABcJAcigEnChJjbGlja190aHJvdWdoX3JhdGURAAAAIPaDTD8aCEVYQ0hBTkdFigEgCgt2aWV3YWJpbGl0eREK16NwPQq3PxoIRVhDSEFOR0WKP2gInvyPkOQDCO2Jz+HIAxHNvVJU9fNsrRGUgHQjwtfHIRFWOltLXPzgMBoBAEADSiYSJDVhYzRhMjhlLTg1OGUtNGJhYi05MmRhLTQ5MDU2N2YxMzJiY2ggaCF6BggCEAEYAZABAJAEABqqATp1aHR0cHM6Ly93d3cubGVwb2ludC5mci9wb2xpdGlxdWUvY2EtcGV1dC10YW5ndWVyLWxlLXBzLWEtbC1oZXVyZS1kdS1jaG9peC1mYWNlLWEtbGVjb3JudS1paS0xMy0xMC0yMDI1LTI2MDA4MzFfMjAucGhwWh0KFHB1Yi04MTQwMzQ2ODI2MDk4NDQz0j4ECgJGUmIHaACaAQJmcpI/CAgAEAIiADACKugCEm9Nb3ppbGxhLzUuMCAoV2luZG93cyBOVCAxMC4wOyBXaW42NDsgeDY0KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvMTQwLjAuMC4wIFNhZmFyaS81MzcuMzYaDDIxNy4xOTUuMjguMCJJCQrXo3A9akhAEexRuB6F6wFAGgNGUkEiBEZSLUo6FEJvdWxvZ25lLUJpbGxhbmNvdXJ0QgU5MjEwMEgCUHhY9AriPgUI7eGoBHIHV2luZG93c5ABAuEBAAAAAAAA8D/6AYEBCh0KCENocm9taXVtEgMxNDASATASBDczMzkSAzIwOAoaCgtOb3Q9QT9CcmFuZBICMjQSATASATASATAKIgoNR29vZ2xlIENocm9tZRIDMTQwEgEwEgQ3MzM5EgMyMDgSEwoHV2luZG93cxICMTUSATASATAYACIDeDg2KgI2NDgC0kIAMpoMUuEFQ1FaVk9nQVFaVk9nQUFHQUJDRU5CLUZzQVBfZ0FFUGdBQXFJS2JNQmJHSk1TU0ZnY1RwMVlPc0FhWWdld1ZBQ3FzQWdCZ0tCQVFBQmlCSUN0SVFVa0dBQUlBaEFoaUFBQUFJQUNFQkFBQUJsQUFCQUFBQUFJQUFBQUNBTUNBQUFBQkFBSUNBQUFBQUJRZ0FBQ0VBSkFRQUFBQUFReEVCRUFBRUFnUUlFNkpwVXdBeEFBQUFBQ0FBQUFBQUFBQUNBQUFBSUFBQUFBQUFBQVFBQUFBZ0FBQUFBQUFJQUFBQUFBQkFBRUFBQUFBRUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFFRElZQ1FBQ2dBSGdBa0FCVUFFY0FSd0E3Z0I5Z0VBQUlRQVJ3QV80Q1BRRXhBTEVBV29BeFlCa0lCSVNBNUFCUUFGUUFPQUFnZ0JrQUdvQVBBQW1BQlZBRGVBSDRBUWdBamdCV2dEREFHVUFPY0Fkd0Etd0ItZ0VBQU5FQWJRQlI0QzJBRjVnTU5nWkdCa2dEVndISmpvRU1BRkFBVkFBNEFDQ0FHUUFhZ0E4QUNZQUZXQUxnQXVnQmlBRGVBSDRBVVlBclFCaGdES0FIT0FPNEFmWUFfUUNMQUVkQU5vQW1RQlI0QzJBRjVnTDZBWWFBeDZCa1lHU0FOWEFjbUJIWWNBQkFDZ1FnRmdBVUFCcUFGVUFMZ0FZZ0EzZ0ItQUhPQU80QTJnREl5VUE4QUNnQUhBQWVBQk1BQ3FBRndBTVFBamdCUmdDdEFVZUFwb0JiQUM4NEdSZ1pJVWdOUUFVQUJVQURnQUlJQVpBQm9BRHdBSmdBVlFBeEFCLUFGR0FLMEFaUUE1d0ItZ0VXQUk2QWJRQlRRQzJBRjVnTDZBWWJBeU1ESkFISmdRNUFqc1ZBQWdBS0tBQXdBb0FCYkFJNFdnQmdBMUFIY0Fwb0FBQS5mX3dBQUFBQUFBQUH6PrIGChYSBe4DhhZZGg0xfjg5LjQ5NC4yODIyEuEFQ1FaVk9nQVFaVk9nQUFHQUJDRU5CLUZzQVBfZ0FFUGdBQXFJS2JNQmJHSk1TU0ZnY1RwMVlPc0FhWWdld1ZBQ3FzQWdCZ0tCQVFBQmlCSUN0SVFVa0dBQUlBaEFoaUFBQUFJQUNFQkFBQUJsQUFCQUFBQUFJQUFBQUNBTUNBQUFBQkFBSUNBQUFBQUJRZ0FBQ0VBSkFRQUFBQUFReEVCRUFBRUFnUUlFNkpwVXdBeEFBQUFBQ0FBQUFBQUFBQUNBQUFBSUFBQUFBQUFBQVFBQUFBZ0FBQUFBQUFJQUFBQUFBQkFBRUFBQUFBRUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFFRElZQ1FBQ2dBSGdBa0FCVUFFY0FSd0E3Z0I5Z0VBQUlRQVJ3QV80Q1BRRXhBTEVBV29BeFlCa0lCSVNBNUFCUUFGUUFPQUFnZ0JrQUdvQVBBQW1BQlZBRGVBSDRBUWdBamdCV2dEREFHVUFPY0Fkd0Etd0ItZ0VBQU5FQWJRQlI0QzJBRjVnTU5nWkdCa2dEVndISmpvRU1BRkFBVkFBNEFDQ0FHUUFhZ0E4QUNZQUZXQUxnQXVnQmlBRGVBSDRBVVlBclFCaGdES0FIT0FPNEFmWUFfUUNMQUVkQU5vQW1RQlI0QzJBRjVnTDZBWWFBeDZCa1lHU0FOWEFjbUJIWWNBQkFDZ1FnRmdBVUFCcUFGVUFMZ0FZZ0EzZ0ItQUhPQU80QTJnREl5VUE4QUNnQUhBQWVBQk1BQ3FBRndBTVFBamdCUmdDdEFVZUFwb0JiQUM4NEdSZ1pJVWdOUUFVQUJVQURnQUlJQVpBQm9BRHdBSmdBVlFBeEFCLUFGR0FLMEFaUUE1d0ItZ0VXQUk2QWJRQlRRQzJBRjVnTDZBWWJBeU1ESkFISmdRNUFqc1ZBQWdBS0tBQXdBb0FCYkFJNFdnQmdBMUFIY0Fwb0FBQS5mX3dBQUFBQUFBQUEqNAoKcHViY2lkLm9yZxImCiQ1YWM0YTI4ZS04NThlLTRiYWItOTJkYS00OTA1NjdmMTMyYmM4AUDeAloDRVVSWgNVU0RiB0lBQjExLTRiB0lBQjEzLTJiB0lBQjE0LTFiB0lBQjE1LTFiCElBQjE5LTMwYgVJQUIyM2IHSUFCMjMtMWIISUFCMjMtMTBiB0lBQjIzLTJiB0lBQjIzLTNiB0lBQjIzLTRiB0lBQjIzLTViB0lBQjIzLTZiB0lBQjIzLTdiB0lBQjIzLThiB0lBQjIzLTliB0lBQjctMzliB0lBQjctNDRyBxIAyj4CCAGaATIiLQgBEiQKCmdvb2dsZS5jb20SFHB1Yi04MTQwMzQ2ODI2MDk4NDQzMAEaAzEuMJpCAKgBAdI/VRJKQUQ4RmRtNDFiNFVrTVJRUDhQR3VidlhXcnJiQzZGbzhoS0YzcDNtUHFreW9BNVFvYnczT3hkSC0tblBhQ0Q0U3l4OVZ1ZXEzTncgASoFMgEDOAA=";

		OpenRtb.BidRequest userExtEidSampleParsed = OpenRtb.BidRequest.parseFrom(Base64.getDecoder().decode(userExtEidSample.getBytes(StandardCharsets.UTF_8)));

		System.out.println(userExtEidSampleParsed);
		System.out.println("--------------------------------------------------");
		System.out.println("EIDs count: " + userExtEidSampleParsed.getUser().getExtension(AdxExt.user).getEidsCount());
		System.out.println("==================================================");

		String userEidSample = "ChZEX2NEZmpvek1UNHV6d19OMmZvWkZRErYCCgExEisIrAIQ+gEgA1isAmD6AWigAXAuegYIrAIQ+gGyPw0SCwigARCsAhguIPoBIgZHT09HTEU6CTQ3MDY5MTEzMUEAAAAAAAD0P0oDRVVSWjEIARItCgcxODIxODQ5EQAAAAAAAAhAGgNFVVIwA5I/EQgBGAEqAwoBATIG7YnP4cgDYAFwkByKAScKEmNsaWNrX3Rocm91Z2hfcmF0ZREAAADg7xmAPxoIRVhDSEFOR0WKASAKC3ZpZXdhYmlsaXR5ERSuR+F6FO4/GghFWENIQU5HRYo/XQjtic/hyAMRVIs2fP/VXk4Ro+tsJsNqTQMRgNnIk0DVDYgaAQBAA0oiEiAyZWM1MWE1NGE1NmI0ZDllYjNmYjg3MTZjYjZkNTI4ZGghaCB6BggCEAEYAZABAJAEABrDATo7aHR0cHM6Ly9jdWlzaW5lLmpvdXJuYWxkZXNmZW1tZXMuZnIvcmVjZXR0ZS8zMjczNDgtcGFuY2FrZXNaHQoUcHViLTc0MTgxOTE3MjgyMTE2MjbSPgQKAkZSYlJoAJoBAmZysgEoRGVzc2VydHMgYW5kIEJha2luZyxGb29kICYgRHJpbmssQ29va2luZ+IBHQoBMBoFCgMyMTAaBQoDMjE3GgUKAzIxNsI+AggGeAGSPw4IABABIgAqBAgBEAAwASqVAxKQAU1vemlsbGEvNS4wIChpUGhvbmU7IENQVSBpUGhvbmUgT1MgMjZfMF8xIGxpa2UgTWFjIE9TIFgpIEFwcGxlV2ViS2l0LzYwNS4xLjE1IChLSFRNTCwgbGlrZSBHZWNrbykgR1NBLzM5MC4wLjgxNzM4ODY0NiBNb2JpbGUvMTVFMTQ4IFNhZmFyaS82MDQuMRoLMTk2Ljc1LjY2LjAiLQn2KFyPwvVAQBGamZmZmZkbwBoDTUFSIgVNQS0wN0gCUDxYoSPiPgUIp+ipBGIFQXBwbGVqBmlwaG9uZXIDaU9TegYyNi4wLjGQAQTIAcAC0AG1BeEBAAAAAAAACED6AY4BCg8KB01vemlsbGESATUSATAKGQoLQXBwbGVXZWJLaXQSAzYwNRIBMRICMTUKGAoDR1NBEgMzOTASATASCTgxNzM4ODY0NgoQCgZNb2JpbGUSBjE1RTE0OAoQCgZTYWZhcmkSAzYwNBIBMRISCgZpUGhvbmUSAjI2EgEwEgExGAEqAjY0MgZpUGhvbmU4A9JCADKNAUIPCgEwGgUKAzM2OMI+AggEWkQKFHB1Yi03NDE4MTkxNzI4MjExNjI2EiwKIE1UaDBjMmMzTnpFNGRITm5OemN4T0hSelp6YzNNVGgwyj4HCgVwcHVpZPo+MyoxCgtmaXJzdC1pZC5mchIiCiAyZWM1MWE1NGE1NmI0ZDllYjNmYjg3MTZjYjZkNTI4ZDgBQN4CWgNFVVJaA1VTRGIHSUFCMTEtNGIHSUFCMTItMWIHSUFCMTItMmIHSUFCMTItM2IHSUFCMTMtMmIHSUFCMTMtM2IHSUFCMTQtMWIISUFCMTUtMTBiB0lBQjctMzmaATIiLQgBEiQKCmdvb2dsZS5jb20SFHB1Yi03NDE4MTkxNzI4MjExNjI2MAEaAzEuMJpCAKgBAdI/UhJKQUQ4RmRtN0g1VmN6YWVoajRlS1dobmdMNVNtd3Q3cGpKbWhZaWJPbGtnUmFQbnE3X3pXNEhabUZIVkdQY2hoRm5iYlA0U1BQMkEgASoCOAE=";

		OpenRtb.BidRequest userEidSampleParsed = OpenRtb.BidRequest.parseFrom(Base64.getDecoder().decode(userEidSample.getBytes(StandardCharsets.UTF_8)));

		System.out.println(userEidSampleParsed);
		System.out.println("--------------------------------------------------");
		System.out.println("EIDs count: " + userEidSampleParsed.getUser().getEidsCount());
		System.out.println("==================================================");
	}
}
